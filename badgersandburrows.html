<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <title>Woodland Warband Roster – B&B2e</title> <style> :root{ --bg:#0f120c; /* deep forest */ --paper:#efe3b2; /* warm parchment */ --paper-2:#e2d59a; /* darker parchment */ --ink:#2b2415; /* dark brown ink */ --leaf:#3c6e47; /* woodland green */ --leaf-2:#2f5839; --accent:#b1772a; /* sap/amber */ --line:#cdbf83; /* parchment line */ --muted:#756848; --danger:#8b2f2f; --ok:#2e6d4a; --shadow: 0 10px 30px rgba(0,0,0,.35); } * , *::before, *::after{ box-sizing:border-box; } html,body{height:100%;} body{margin:0; background:linear-gradient(180deg, #0c100a, var(--bg)); font-family: ui-serif, Georgia, "Times New Roman", serif; color:var(--ink); line-height:1.25;} .wrap{max-width:1100px; margin:24px auto; padding:20px} .sheet{background: radial-gradient(2000px 700px at 50% -10%, #fff2c9 0%, var(--paper) 40%, var(--paper-2) 100%); border: 1px solid #dccb8f; border-radius:18px; box-shadow:var(--shadow); position:relative; overflow:hidden} .sheet:before,.sheet:after{content:""; position:absolute; inset:0; pointer-events:none; background:radial-gradient(20px 20px at 15% 8%, rgba(60,110,71,.35) 20%, transparent 42%), radial-gradient(18px 18px at 10% 14%, rgba(60,110,71,.25) 18%, transparent 40%), radial-gradient(16px 16px at 90% 10%, rgba(60,110,71,.30) 22%, transparent 45%), conic-gradient(from 60deg at 10% 100%, rgba(47,88,57,.17), transparent 25%), conic-gradient(from 120deg at 100% 0%, rgba(47,88,57,.17), transparent 25%); mix-blend-mode:multiply; opacity:.85} header{display:grid; grid-template-columns:1.2fr .8fr .8fr; gap:12px; padding:24px 24px 12px; border-bottom:2px dashed var(--line)} h1{margin:0; font-size:28px; letter-spacing:.5px; color:#1f1a0e} small.sub{display:block; color:var(--muted); margin-top:2px} .band-field{display:flex; flex-direction:column; gap:6px} label{font-variant:small-caps; letter-spacing:.08em; font-size:13px; color:#4a3e21} input[type="text"], input[type="number"], textarea, select{border:1px solid #cdbf83; background:linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.2)); padding:10px 12px; border-radius:9px; outline:none; color:#1f1a0e; box-shadow: inset 0 1px 0 rgba(255,255,255,.4), inset 0 -2px 8px rgba(0,0,0,.06); width:100%;} select{cursor:pointer} textarea{min-height:88px; resize:vertical} textarea.auto{min-height:88px; resize:none} .grid-3{display:grid; grid-template-columns:repeat(3, 1fr); gap:12px} .grid-2{display:grid; grid-template-columns:repeat(2, 1fr); gap:12px} .section{padding:16px 24px; border-bottom:1px dashed var(--line)} .section h2{margin:0 0 8px; font-size:18px; color:#2e2616} .section p.hint{margin:4px 0 12px; color:#6a5c3d; font-size:13px} .members{padding:16px 24px} .member{background:linear-gradient(180deg, #fff7d2, #eddba2); border:1px solid #d4c785; border-radius:14px; padding:12px; margin-bottom:12px; position:relative} .member .top{display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; gap:10px; margin-bottom:8px} .attrs{display:grid; grid-template-columns:repeat(7, 1fr); gap:6px; margin-top:8px} /* Equipment: fixed 3 columns -> 2 -> 1, stable widths */ .equip{display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:10px; margin-top:8px} .btn{background:linear-gradient(180deg, #3e7b4f, #2f5b3a); color:#f6f3e7; border:1px solid #1e3a28; padding:8px 12px; border-radius:10px; cursor:pointer; box-shadow:0 2px 0 rgba(0,0,0,.15); font-weight:600; letter-spacing:.3px} .btn.secondary{background:linear-gradient(180deg, #b37d3c, #8a5f2e); border-color:#5b3c17} .btn.ghost{background:transparent; color:#3a603f; border:1px dashed #3a603f} .btn.danger{background:linear-gradient(180deg, #8b3a3a, #6f2d2d); border-color:#4a1d1d} .toolbar{display:flex; gap:8px; flex-wrap:wrap; padding:12px 24px; border-top:1px dashed var(--line); background:linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05))} details.jsonbox{margin:16px 24px; background:linear-gradient(180deg, #fff7d2, #eedd9c); border:1px solid #d6c788; border-radius:12px} details.jsonbox > summary{cursor:pointer; padding:14px 16px; list-style:none; font-weight:700} details.jsonbox[open] > summary{border-bottom:1px dashed var(--line)} .json-area{padding:12px} .json-area textarea{width:100%; min-height:160px} .mini{display:flex; align-items:center; gap:8px; font-size:12px; color:#5a4f35} .chip-group{display:flex; gap:6px; flex-wrap:wrap} .chip{display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; background:linear-gradient(180deg,#fff3c1,#ead68d); border:1px solid #cfbf82; font-size:12px} .tracks{display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; margin-top:8px} .track{background:linear-gradient(180deg,#fff3c1,#ead68d); border:1px solid #cfbf82; border-radius:10px; padding:8px} .track h3{margin:0 0 6px; font-size:13px; font-variant:small-caps; letter-spacing:.08em} .pips{display:flex; flex-wrap:wrap; gap:6px} .dot{width:18px; height:18px; border-radius:50%; border:1px solid #a28f58; background:#fff6cc; cursor:pointer} .dot.on{background:var(--leaf); border-color:#24412b} .wound-controls{display:flex; gap:6px; align-items:center; margin-top:6px} .footer-note{padding:10px 24px; color:#675b3d; font-size:12px} @media (max-width: 960px){ header{grid-template-columns:1fr} .member .top{grid-template-columns:1fr 1fr;} .attrs{grid-template-columns:repeat(3, 1fr)} .tracks{grid-template-columns:1fr} .equip{grid-template-columns: repeat(2, minmax(0, 1fr));} } @media (max-width: 560px){ .equip{grid-template-columns: 1fr;} } </style> </head> <body> <div class="wrap"> <div class="sheet" id="app"> <header> <div> <h1>Woodland Warband Roster</h1> <small class="sub">Burrows & Badgers 2e – campaign play aid</small> </div> <div class="band-field"><label for="bandName">Band Name</label><input id="bandName" type="text" placeholder="e.g., Thorn & Thistle Company"/></div> <div class="band-field"><label for="rating">Rating</label><input id="rating" type="number" min="0" step="1" value="0"/></div> </header> <div class="section"> <div class="grid-3"> <div class="band-field"><label for="allegiance">Allegiance</label><input id="allegiance" type="text" placeholder="Freebeasts, Wildbeasts, etc."/></div> <div class="band-field"><label for="archetype">Archetype</label><input id="archetype" type="text" placeholder="e.g., Rogues, Cultists"/></div> <div class="band-field"><label for="notes">Notes</label><input id="notes" type="text" placeholder="Campaign notes, reminders, injuries..."/></div> </div> </div> <div class="section"> <h2>Stores & Den</h2> <p class="hint">Track what you’ve stashed and how you’ve improved your den between games.</p> <div class="grid-2"> <div class="band-field"><label>Stashed Equipment</label><textarea id="stashed" placeholder="Comma‑separated list or free text"></textarea></div> <div class="band-field"><label>Den Upgrades</label><textarea id="upgrades" placeholder="Kennel, Forge, Shrine, etc."></textarea></div> </div> <div class="section" style="border:none; padding:0; margin-top:12px"> <div class="resources"> <div class="band-field"><label for="treasury">Treasury</label><input id="treasury" type="number" min="0" step="1" value="0"/></div> <div class="band-field"><label for="labour">Labour</label><input id="labour" type="number" min="0" step="1" value="0"/></div> <div class="band-field"><label for="materials">Materials</label><input id="materials" type="number" min="0" step="1" value="0"/></div> </div> </div> </div> <div class="section"> <h2>Pensioners</h2> <p class="hint">Retired heroes of renown.</p> <div id="pension" class="chip-group"></div> <div class="mini" style="gap:8px; margin-top:8px"><input id="pensionInput" type="text" placeholder="Add a name and press +"/><button class="btn secondary" id="pensionAdd">+ Add</button></div> </div> <div class="members" id="members"></div> <div class="toolbar"> <button class="btn" id="addMember">+ Add Member</button> <button class="btn secondary" id="exportBtn">Export JSON</button> <button class="btn ghost" id="downloadBtn">Download .json</button> <button class="btn" id="importFromBox">Import from box</button> <button class="btn danger" id="clearAll">Clear All</button> </div> <details class="jsonbox" id="jsonBox"> <summary>JSON import/export (click to expand)</summary> <div class="json-area"> <div class="mini">Paste JSON below and click <strong>Import from box</strong> • or click <strong>Export JSON</strong> to print your current state.</div> <textarea id="jsonArea" placeholder="{ \"band\": { ... }, \"members\": [ ... ] }"></textarea> </div> </details> <div class="footer-note">Autosaves locally in your browser. Use Export/Download to back up or move between devices.</div> </div> </div> <script> (function(){ const $ = s => document.querySelector(s); const $$ = s => Array.from(document.querySelectorAll(s)); const DICE = ["d2","d4","d6","d8","d10","d12","d20"]; const state = { band:{ name:"", rating:0, allegiance:"", notes:"", archetype:"", stashed:"", upgrades:"", treasury:0, labour:0, materials:0, pension:[] }, members:[] }; const refs = { bandName: $('#bandName'), rating: $('#rating'), allegiance: $('#allegiance'), notes: $('#notes'), archetype: $('#archetype'), stashed: $('#stashed'), upgrades: $('#upgrades'), treasury: $('#treasury'), labour: $('#labour'), materials: $('#materials'), pensionWrap: $('#pension'), pensionInput: $('#pensionInput'), pensionAdd: $('#pensionAdd'), members: $('#members'), addMember: $('#addMember'), exportBtn: $('#exportBtn'), downloadBtn: $('#downloadBtn'), jsonArea: $('#jsonArea'), jsonBox: $('#jsonBox'), importFromBox: $('#importFromBox'), clearAll: $('#clearAll') }; const STORAGE_KEY = 'bb2e_woodland_roster_v3'; function blankMember(){ return { id: crypto.randomUUID(), name:"", species:"", level:0, presence:0, fortitude:0, skills:"", spells:"", attrs:{ move:"d6", strike:"d6", block:"d6", ranged:"d6", nimbleness:"d6", concealment:"d6", awareness:"d6" }, equip:{ weapon1:"", weapon2:"", armour1:"", armour2:"", item:"", special:"" }, fate:0, exp:0, wounds:{ current:0, max:6 } }; } function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } function load(){ const raw = localStorage.getItem(STORAGE_KEY); if(raw){ try{ Object.assign(state, JSON.parse(raw)||{}); }catch(e){} return; } // migrate v2 or v1 const old2 = localStorage.getItem('bb2e_woodland_roster_v2') || localStorage.getItem('bb2e_woodland_roster_v1'); if(!old2) return; try{ const data = JSON.parse(old2); if(data?.band) state.band = data.band; if(Array.isArray(data?.members)) state.members = data.members.map(upgradeMember); }catch(e){ console.warn('migrate fail', e); } } function upgradeMember(m){ const base = blankMember(); const merged = Object.assign(base, m); merged.attrs = convertAttrsToDice(merged.attrs); if(!merged.spells) merged.spells = ""; // split skills/spells if previous combined if(merged.wounds && typeof merged.wounds === 'object'){ merged.wounds = { current: clamp(Number(merged.wounds.current)||0, 0, Number(merged.wounds.max)||6), max: Number(merged.wounds.max)||6 }; } return merged; } function convertAttrsToDice(attrs){ const out = { move:"d6", strike:"d6", block:"d6", ranged:"d6", nimbleness:"d6", concealment:"d6", awareness:"d6" }; if(!attrs) return out; for(const k of Object.keys(out)){ const v = attrs[k]; out[k] = (typeof v === 'string' && /^d(2|4|6|8|10|12|20)$/.test(v)) ? v : d${Math.max(2, Math.min(20, Number(v)||6))}; } return out; } function bindBand(){ const b = state.band; $('#bandName').value = b.name||""; $('#rating').value = b.rating||0; $('#allegiance').value = b.allegiance||""; $('#notes').value = b.notes||""; $('#archetype').value = b.archetype||""; $('#stashed').value = b.stashed||""; $('#upgrades').value = b.upgrades||""; $('#treasury').value = b.treasury||0; $('#labour').value = b.labour||0; $('#materials').value = b.materials||0; renderPension(); } function onBandInput(){ const b = state.band; b.name = $('#bandName').value; b.rating = num($('#rating').value); b.allegiance = $('#allegiance').value; b.notes = $('#notes').value; b.archetype = $('#archetype').value; b.stashed = $('#stashed').value; b.upgrades = $('#upgrades').value; b.treasury = num($('#treasury').value); b.labour = num($('#labour').value); b.materials = num($('#materials').value); save(); } function renderPension(){ const wrap = refs.pensionWrap; wrap.innerHTML = ''; state.band.pension.forEach((name, idx)=>{ const chip = document.createElement('span'); chip.className='chip'; chip.innerHTML = <span>🕯️ ${escapeHtml(name)}</span> <button class=\"btn ghost\" style=\"padding:2px 6px\" data-i=\"${idx}\">×</button>; chip.querySelector('button').addEventListener('click',()=>{ state.band.pension.splice(idx,1); renderPension(); save(); }); wrap.appendChild(chip); }); } function addPension(){ const v = refs.pensionInput.value.trim(); if(!v) return; state.band.pension.push(v); refs.pensionInput.value=''; renderPension(); save(); } function renderMembers(){ const container = refs.members; container.innerHTML = ''; state.members.forEach((m, idx)=>{ const el = document.createElement('div'); el.className='member'; el.dataset.id = m.id; el.innerHTML = memberTemplate(m, idx); wireMember(el, m); container.appendChild(el); }); // autosize textareas $$('.auto').forEach(t=>autoSize(t)); } function memberTemplate(m, idx){ return <div class=\"mini\" style=\"justify-content:space-between; display:flex; margin-bottom:6px\"> <span>Member ${idx+1}</span> <span> <button class=\"btn ghost\" data-act=\"dup\">Duplicate</button> <button class=\"btn danger\" data-act=\"del\">Remove</button> </span> </div> <div class=\"top\"> ${textField('Name','name',m.name)} ${textField('Species','species',m.species)} ${number('Level','level',m.level)} ${number('Presence','presence',m.presence)} ${number('Fortitude','fortitude',m.fortitude)} </div> <div class=\"band-field\"><label>Skills</label><textarea class=\"auto\" data-key=\"skills\" placeholder=\"Talents, abilities, traits...\">${escapeHtml(m.skills||'')}</textarea></div> <div class=\"band-field\"><label>Spells</label><textarea class=\"auto\" data-key=\"spells\" placeholder=\"Spell names, notes, ranges, costs...\">${escapeHtml(m.spells||'')}</textarea></div> <div class=\"attrs\"> ${dieAttr('Move','move',m.attrs.move)} ${dieAttr('Strike','strike',m.attrs.strike)} ${dieAttr('Block','block',m.attrs.block)} ${dieAttr('Ranged','ranged',m.attrs.ranged)} ${dieAttr('Nimbleness','nimbleness',m.attrs.nimbleness)} ${dieAttr('Concealment','concealment',m.attrs.concealment)} ${dieAttr('Awareness','awareness',m.attrs.awareness)} </div> <div class="equip"> <!-- Row 1: Weapon 1 | Armour 1 | Item --> <div class="band-field"><label>Weapon 1</label><input type="text" data-key="equip.weapon1" value=""/></div> <div class="band-field"><label>Armour 1</label><input type="text" data-key="equip.armour1" value=""/></div> <div class="band-field"><label>Item</label><input type="text" data-key="equip.item" value=""/></div> <!-- Row 2: Weapon 2 | Armour 2 | Special --> <div class="band-field"><label>Weapon 2</label><input type="text" data-key="equip.weapon2" value=""/></div> <div class="band-field"><label>Armour 2</label><input type="text" data-key="equip.armour2" value=""/></div> <div class="band-field"><label>Special</label><input type="text" data-key="equip.special" value=""/></div> </div> <div class=\"tracks\"> <div class=\"track\" data-track=\"fate\"><h3>Fate</h3><div class=\"pips\">${pips(6, m.fate)}</div></div> <div class=\"track\" data-track=\"exp\"><h3>Experience</h3><div class=\"pips\">${pips(12, m.exp)}</div></div> <div class=\"track\" data-track=\"wounds\"> <h3>Wounds</h3> <div class=\"pips\">${pips(m.wounds.max, m.wounds.current)}</div> <div class=\"wound-controls\"> <label style=\"font-variant:small-caps\">Max</label> <input type=\"number\" data-key=\"wounds.max\" min=\"1\" step=\"1\" value=\"${m.wounds.max}\" style=\"width:80px\"/> <button class=\"btn ghost\" data-w=\"-1\">−</button> <button class=\"btn ghost\" data-w=\"+1\">+</button> </div> </div> </div> ; } function textField(labelTxt, key, val){ return <div class=\"band-field\"><label>${labelTxt}</label><input type=\"text\" data-key=\"${key}\" value=\"${escapeHtml(val||'')}\"/></div>; } function number(labelTxt, key, val){ return <div class=\"band-field\"><label>${labelTxt}</label><input type=\"number\" step=\"1\" data-key=\"${key}\" value=\"${val||0}\"/></div>; } function dieAttr(labelTxt, key, val){ return <div class=\"band-field\"><label>${labelTxt}</label>${dieSelect(attrs.${key}, val)}</div>; } function dieSelect(key, val){ const opts = DICE.map(d=><option value=\"${d}\" ${val===d? 'selected':''}>${d.toUpperCase()}</option>).join(''); return <select data-key=\"${key}\">${opts}</select>; } function pips(n, active){ let out=''; for(let i=1;i<=Math.max(0,n);i++){ out += <div class=\"dot ${i<=active? 'on':''}\" data-i=\"${i}\"></div>; } return out; } function wireMember(el, m){ el.querySelectorAll('input[data-key], textarea[data-key]').forEach(inp=>{ inp.addEventListener('input', ()=>{ setDeep(m, inp.dataset.key, inp.type==='number'? num(inp.value) : inp.value); save(); }); }); el.querySelectorAll('select[data-key]').forEach(sel=>{ sel.addEventListener('change', ()=>{ setDeep(m, sel.dataset.key, sel.value); save(); }); }); // Fate/EXP/Wounds pips el.querySelectorAll('.track').forEach(tr=>{ const type = tr.dataset.track; tr.querySelectorAll('.dot').forEach(dot=>{ dot.addEventListener('click',()=>{ const i = num(dot.dataset.i); if(type==='wounds') m.wounds.current = (m.wounds.current===i)? i-1 : i; else m[type] = (m[type]===i)? i-1 : i; renderMembers(); save(); }); }); }); // Wound +/- buttons el.querySelectorAll('[data-w]').forEach(btn=>{ btn.addEventListener('click', ()=>{ const delta = btn.dataset.w === '+1' ? 1 : -1; m.wounds.current = clamp(m.wounds.current + delta, 0, m.wounds.max); renderMembers(); save(); }); }); // Delete / Duplicate el.querySelector('[data-act="del"]').addEventListener('click',()=>{ state.members = state.members.filter(mm=>mm.id!==m.id); renderMembers(); save(); }); el.querySelector('[data-act="dup"]').addEventListener('click',()=>{ const copy = JSON.parse(JSON.stringify(m)); copy.id = crypto.randomUUID(); state.members.splice(state.members.indexOf(m)+1,0,copy); renderMembers(); save(); }); } function autoSize(t){ t.style.height = 'auto'; t.style.height = (t.scrollHeight+2)+'px'; t.addEventListener('input', ()=>{ t.style.height='auto'; t.style.height=(t.scrollHeight+2)+'px'; }); } function setDeep(obj, path, value){ const parts = path.split('.'); let cur = obj; for(let i=0;i<parts.length-1;i++){ const k = parts[i]; if(!(k in cur)) cur[k] = {}; cur = cur[k]; } cur[parts[parts.length-1]] = value; } function num(v){ return (v===''||v===null||v===undefined)? 0 : Number(v); } function clamp(v, lo, hi){ return Math.max(lo, Math.min(hi, v)); } function escapeHtml(str){ return String(str).replace(/[&<>"']/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[s])); } function addMember(){ state.members.push(blankMember()); renderMembers(); save(); } // JSON IO function exportJSON(){ const data = JSON.stringify(state, null, 2); $('#jsonArea').value = data; refs.jsonBox.open = true; } function downloadJSON(){ const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); const name = (state.band.name||'warband').replace(/[^a-z0-9]+/gi,'_').replace(/^_|_$/g,''); a.href = url; a.download = ${name||'warband'}.json; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); } function importFromTextarea(){ const raw = $('#jsonArea').value.trim(); if(!raw) return alert('Paste JSON into the box first.'); try{ const data = JSON.parse(raw); if(!data || typeof data !== 'object') throw new Error('Bad JSON'); Object.assign(state.band, data.band||{}); state.members = Array.isArray(data.members)? data.members.map(upgradeMember) : []; bindBand(); renderMembers(); save(); alert('Imported successfully.'); }catch(e){ alert('Invalid JSON. Check your paste and try again.'); } } function clearAll(){ if(!confirm('Clear all data from this sheet? This cannot be undone.')) return; state.band = { name:"", rating:0, allegiance:"", notes:"", archetype:"", stashed:"", upgrades:"", treasury:0, labour:0, materials:0, pension:[] }; state.members = []; bindBand(); renderMembers(); save(); } // Wire [refs.bandName, refs.rating, refs.allegiance, refs.notes, refs.archetype, refs.stashed, refs.upgrades, refs.treasury, refs.labour, refs.materials].forEach(el=>{ el.addEventListener('input', onBandInput); }); refs.pensionAdd.addEventListener('click', addPension); refs.pensionInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); addPension(); } }); refs.addMember.addEventListener('click', addMember); refs.exportBtn.addEventListener('click', exportJSON); refs.downloadBtn.addEventListener('click', downloadJSON); refs.importFromBox.addEventListener('click', importFromTextarea); refs.clearAll.addEventListener('click', clearAll); // Init load(); bindBand(); renderMembers(); if(state.members.length===0){ addMember(); } })(); </script> </body> </html>
